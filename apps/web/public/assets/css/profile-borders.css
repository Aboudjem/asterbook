/* Profile Borders - Wrapper Architecture v2 */

/* 
   IMPORTANT: These classes must be applied to a CONTAINER div, 
   not the image itself.
   
   Structure:
   <div class="border-xyz" style="width: 50px; height: 50px;">
       <img src="..." style="width: 100%; height: 100%; border-radius: 50%;">
   </div>
*/

/* Base styles for all border containers */
[class^="border-"] {
    position: relative;
    display: inline-block;
    border-radius: 50%;
    /* Ensure the border effect doesn't get clipped by the container itself usually */
    /* But for some effects like 'overflow: hidden' inside, we manage it specifically */
    box-sizing: border-box;
    padding: 3px; /* Default spacing for border visibility */
}

/* Ensure the image inside stays on top and round */
[class^="border-"] img,
[class^="border-"] .avatar-img,
[class^="border-"] .border-preview-circle {
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    object-fit: cover;
    position: relative;
    z-index: 5; /* Image is King */
    background-color: #0f172a; /* Fallback background for transparent images */
}

/* --- PACK 1 --- */

/* 1. Simple Elegant */
.border-simple {
    background: #0f172a; /* Gap color */
    box-shadow: 0 0 0 2px #fff;
}

/* 2. Luminous */
.border-luminous {
    padding: 2px;
    box-shadow: 0 0 15px rgba(59, 130, 246, 0.8);
    animation: luminous-pulse 2s infinite;
    background: #3b82f6; /* The actual border color */
}
@keyframes luminous-pulse {
    0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); }
    70% { box-shadow: 0 0 20px 10px rgba(59, 130, 246, 0); }
    100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); }
}

/* 3. Gradient */
.border-gradient {
    padding: 3px;
    background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888, #231557);
    background-size: 200% 200%;
    animation: gradient-spin 3s ease infinite;
}
@keyframes gradient-spin {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* 4. Gold */
.border-gold {
    padding: 3px;
    background: #ffd700;
    box-shadow: 0 0 10px #ffd700;
    overflow: hidden; /* Needed for the shine effect crossing the container */
}
/* Shine effect on the container */
.border-gold::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.8), transparent);
    transform: rotate(45deg);
    animation: shine 3s infinite;
    z-index: 6; /* On top of image for the shine? Or below? Let's put it on top for 'shiny' look but low opacity */
    pointer-events: none;
}
@keyframes shine {
    0% { transform: translateX(-100%) rotate(45deg); }
    100% { transform: translateX(100%) rotate(45deg); }
}

/* 5. Neon */
.border-neon {
    padding: 2px;
    background: #fff;
    box-shadow: 
        0 0 5px #fff,
        0 0 10px #fff,
        0 0 20px #ff00de,
        0 0 30px #ff00de,
        0 0 40px #ff00de;
    animation: neon-flicker 1.5s infinite alternate;
}
@keyframes neon-flicker {
    0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
        box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 20px #ff00de, 0 0 30px #ff00de, 0 0 40px #ff00de;
    }
    20%, 24%, 55% {
        box-shadow: none;
    }
}

/* --- PACK 2 --- */

/* 6. Fire */
.border-fire {
    padding: 3px;
    background: #f59e0b;
    box-shadow: 0 0 10px #ef4444, 0 0 20px #f59e0b;
    animation: fire-pulse 1s infinite alternate;
}
@keyframes fire-pulse {
    from { box-shadow: 0 0 10px #ef4444, 0 0 20px #f59e0b; }
    to { box-shadow: 0 0 20px #ef4444, 0 0 40px #b91c1c; }
}

/* 7. Ice */
.border-ice {
    padding: 3px;
    background: #ecfeff;
    box-shadow: 0 0 10px #06b6d4, 0 0 20px #a5f3fc;
    overflow: hidden;
}
.border-ice::after {
    content: '';
    position: absolute;
    inset: -50%;
    background: linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.8) 50%, transparent 60%);
    animation: ice-glint 3s infinite;
    transform: rotate(45deg);
    z-index: 6;
    pointer-events: none;
}
@keyframes ice-glint {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

/* 8. Glitch */
.border-glitch {
    padding: 2px;
    background: #fff;
    box-shadow: -2px 0 #0ff, 2px 0 #f00;
    animation: glitch-anim 2s infinite linear alternate-reverse;
}
@keyframes glitch-anim {
    0% { box-shadow: -2px 0 #0ff, 2px 0 #f00; transform: translate(0); }
    2% { box-shadow: 2px 0 #0ff, -2px 0 #f00; transform: translate(-2px, 2px); }
    4% { box-shadow: -2px 0 #0ff, 2px 0 #f00; transform: translate(2px, -2px); }
    6% { box-shadow: -2px 0 #0ff, 2px 0 #f00; transform: translate(0); }
    100% { box-shadow: -2px 0 #0ff, 2px 0 #f00; transform: translate(0); }
}

/* 9. Galaxy */
.border-galaxy {
    padding: 3px;
    background: linear-gradient(135deg, #6366f1, #8b5cf6, #d946ef);
    box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
}

/* 10. Toxic */
.border-toxic {
    padding: 3px;
    background: #84cc16;
    box-shadow: 0 0 10px #84cc16;
    animation: toxic-ooze 3s infinite;
}
@keyframes toxic-ooze {
    0% { box-shadow: 0 0 10px #84cc16; }
    50% { box-shadow: 0 0 25px #bef264; }
    100% { box-shadow: 0 0 10px #84cc16; }
}

/* 11. Rainbow Flow */
.border-rainbow-flow {
    padding: 3px;
    background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #8b00ff);
    background-size: 500% 500%;
    animation: rainbow-move 5s linear infinite;
}
@keyframes rainbow-move { 
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}

/* 12. Lightning */
.border-lightning {
    padding: 2px;
    background: #fff;
    box-shadow: 0 0 5px #fff, 0 0 10px #3b82f6;
    animation: lightning-flash 1.5s infinite;
}
@keyframes lightning-flash {
    0%, 100% { box-shadow: 0 0 5px #fff, 0 0 10px #3b82f6; }
    5% { box-shadow: 0 0 20px #fff, 0 0 40px #60a5fa; }
    10% { box-shadow: 0 0 5px #fff, 0 0 10px #3b82f6; }
}

/* 13. Steampunk */
.border-steampunk {
    padding: 4px;
    /* Simulate gear teeth with dashed border on container */
    background: transparent;
    border: 2px dashed #b45309; 
    box-shadow: 0 0 0 2px #78350f inset;
    animation: steampunk-rotate 10s linear infinite;
    /* Important: Steampunk rotates the CONTAINER. 
       We must counter-rotate the image so it stays upright? 
       Or just let it rotate? Usually avatars shouldn't rotate.
       
       Better approach: Pseudo-element for the gear.
    */
    border: none;
    box-shadow: none;
    animation: none;
}
.border-steampunk::before {
    content: '';
    position: absolute;
    inset: -4px;
    border: 3px dashed #b45309;
    border-radius: 50%;
    animation: steampunk-rotate 10s linear infinite;
    box-shadow: inset 0 0 0 2px #78350f;
    z-index: 1;
}
@keyframes steampunk-rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* 14. Snake */
.border-snake {
    padding: 3px;
    background: #334155; /* Track color */
    overflow: hidden;
    z-index: 0; /* Create stacking context */
}
.border-snake::before {
    content: '';
    position: absolute;
    top: -50%; left: -50%; width: 200%; height: 200%;
    background: conic-gradient(transparent, transparent, transparent, #00ff00);
    animation: snake-spin 4s linear infinite;
    z-index: 1; /* Behind image (5) but above background */
}
/* Masking inner part to show only border? 
   The image sits on top with z-index 5, so it covers the center.
   The padding:3px creates the visible track.
*/
@keyframes snake-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* 15. Retro */
.border-retro {
    padding: 4px;
    background: #0f172a;
    border: 3px double #d946ef;
    box-shadow: 0 0 10px #d946ef, 0 0 5px #06b6d4;
    box-sizing: content-box; /* To accommodate the double border inside? No, keep border-box but add margin if needed */
}
/* Double border works fine on container */


/* 30. Cosmic Legendary (The Ultimate One) */
.border-cosmic-legendary {
    padding: 4px;
    background: transparent;
    z-index: 1;
}
.border-cosmic-legendary::before {
    content: '';
    position: absolute;
    inset: -5px;
    border-radius: 50%;
    background: conic-gradient(
        #00ffff, #ff00ff, #ff0000, #ffff00, #00ff00, #0000ff, #00ffff
    );
    animation: cosmic-spin 3s linear infinite;
    z-index: -1;
    filter: blur(5px);
}
.border-cosmic-legendary::after {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 50%;
    background: #0f172a; /* Match body bg to create "gap" */
    z-index: -1;
}
/* Inner ring */
.border-cosmic-legendary img {
    border: 2px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
}

@keyframes cosmic-spin {
    0% { transform: rotate(0deg); filter: blur(5px) hue-rotate(0deg); }
    100% { transform: rotate(360deg); filter: blur(5px) hue-rotate(360deg); }
}

/* Helper for chat specific sizing adjustments */
.chat-avatar-wrapper {
    width: 32px !important;
    height: 32px !important;
    padding: 2px !important; /* Smaller padding for small avatars */
}

/* Preview Box overrides */
.border-preview-box {
    /* Used in shop.php */
    width: 80px; 
    height: 80px; 
    background: transparent !important; /* Ensure container bg doesn't conflict */
}
/* Ensure the preview circle inside acts like an image */
.border-preview-circle {
    background-color: #1e293b;
    z-index: 5;
}
